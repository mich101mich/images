!function(e){function t(t){for(var n,o,i=t[0],a=t[1],s=0,d=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);d.length;)d.shift()()}var n={},r={main:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({}[e]||e)+".js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var c=a;o(o.s="./main.js")}({"./main.js":function(e,t,n){let r=E("search"),o=E("submit"),i=function(e){const t=y(e);if(!(t instanceof HTMLFormElement))throw new Error(`Element ${e} is not of type HTMLFormElement`);return t}("form"),a=function(e){const t=y(e);if(!(t instanceof HTMLDivElement))throw new Error(`Element ${e} is not of type HTMLDivElement`);return t}("container"),s=y("scaleNum"),c=E("scale"),d=parseInt(c.value);const l={},u={},f=[],h={},p=[];let m=!1;(async function(){await Promise.all([n.e(0),n.e(3)]).then(n.t.bind(null,"./node_modules/firebase/app/dist/index.cjs.js",7)),await Promise.all([Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"./node_modules/firebase/auth/dist/index.esm.js")),Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"./node_modules/firebase/firestore/dist/index.esm.js"))]),firebase.initializeApp({apiKey:"AIzaSyA6NxdrkCKIxqu3XBkx5hIVteOQ0jv2zrA",authDomain:"forward-rain-251118.firebaseapp.com",databaseURL:"https://forward-rain-251118.firebaseio.com",projectId:"forward-rain-251118",storageBucket:"forward-rain-251118.appspot.com",messagingSenderId:"924050779321",appId:"1:924050779321:web:ab16910e8859ce8c71ff68",measurementId:"G-R9KW7GPT0L"});const e=new firebase.auth.GoogleAuthProvider;await firebase.auth().signInWithPopup(e);const t=firebase.firestore().collection("documents");(await t.get()).forEach(e=>{h[e.id]=e,l[e.id]=" "+e.get("index")+" ",p.push(e.id)}),m=!0})().catch(console.error);let w="";async function g(e,t=!1){if(!m||e.length<3)return;if(!t&&w==e)return;w=e,e=e.toLowerCase(),m=!1,b(),f.forEach(e=>e.hidden=!0);const n=" "==e[0],r=" "==e[e.length-1],o=e.trim(),i=p.filter(t=>-1!=l[t].indexOf(e));for(;f.length<i.length;){const e=document.createElement("canvas");e.width=a.clientWidth/d-1,e.height=1.5*e.width+1,e.style.width=e.width+"px",e.style.height=e.height+"px",a.appendChild(e),f.push(e)}await Promise.all(i.map((e,t)=>async function(e,t,n,r,o){if(!(e in u)){const t=document.createElement("img");t.src="https://storage.cloud.google.com/forward-rain-251118.appspot.com/documents/"+encodeURIComponent(e),t.hidden=!0;const n=new Promise(e=>t.addEventListener("load",e));document.body.appendChild(t),await n,u[e]=t}const i=u[e];t.hidden=!1;const s=i.height/i.width;t.width=a.clientWidth/d-1,t.height=t.width*s+1,t.style.width=t.width+"px",t.style.height=t.height+"px";const c=t.getContext("2d");if(!c)throw new Error("Cannot get 2d Context of Canvas");const l=t.width/i.width;c.resetTransform(),c.scale(l,l),c.drawImage(i,0,0),c.lineWidth=1/l+1,c.strokeStyle="red";h[e].get("blocks").filter(e=>{const t=e.text;return r&&o?t==n:r?t.startsWith(n):o?t.endsWith(n):-1!=t.indexOf(n)}).forEach(e=>{c.strokeRect(e.x,e.y,e.width,e.height)})}(e,f[t],o,n,r))),m=!0,b()}function b(){const e=m&&r.value.trim().length>=3&&r.value!=w,t=m&&w.length>=3;o.disabled=!e,c.disabled=!t}function v(e){for(const e of f){const t=e.height/e.width,n=a.clientWidth/d-1,r=n*t+1;e.style.width=n+"px",e.style.height=r+"px"}e&&g(w,!0).catch(console.error)}function y(e){const t=document.getElementById(e);if(!t)throw new Error(`Element ${e} does not exist`);return t}function E(e){const t=y(e);if(!(t instanceof HTMLInputElement))throw new Error(`Element ${e} is not of type HTMLInputElement`);return t}r.addEventListener("input",b),i.onsubmit=e=>(g(r.value).catch(console.error),e.preventDefault(),!1),window.addEventListener("resize",()=>v(!0)),c.addEventListener("input",()=>{d=parseInt(c.value),s.innerText="Images per Row: "+d,v(!1)}),c.addEventListener("change",()=>{d=parseInt(c.value),s.innerText="Images per Row: "+d,v(!0)})}});